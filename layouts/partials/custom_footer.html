<script>
// Copy code functionality - progressive enhancement
document.addEventListener('DOMContentLoaded', function() {
    // Only add copy functionality if browser supports clipboard API
    if (navigator.clipboard) {
        const codeBlocks = document.querySelectorAll('.highlight');

        codeBlocks.forEach(function(block) {
            // Create copy button
            const button = document.createElement('button');
            button.type = 'button';
            button.className = 'copy-code-button';
            button.textContent = 'Copy';
            button.setAttribute('aria-label', 'Copy code to clipboard');

            // Add click handler
            button.addEventListener('click', function() {
                const code = block.querySelector('code');
                if (code) {
                    const text = code.textContent || code.innerText;
                    navigator.clipboard.writeText(text).then(function() {
                        button.textContent = 'Copied!';
                        button.classList.add('copy-code-button--success');

                        setTimeout(function() {
                            button.textContent = 'Copy';
                            button.classList.remove('copy-code-button--success');
                        }, 2000);
                    }).catch(function() {
                        button.textContent = 'Failed';
                        button.classList.remove('copy-code-button--success');
                        setTimeout(function() {
                            button.textContent = 'Copy';
                        }, 2000);
                    });
                }
            });

            // Add button to block
            block.style.position = 'relative';
            block.appendChild(button);
        });
    }
});
</script>
